## Цель  
Изучить инструменты мониторинга производительности ИТ-инфраструктуры, рассмотреть возможности консольных утилит atop и htop, а также современных систем мониторинга Prometheus и Grafana, применяемых для анализа и визуализации метрик.  

## Задание  
1. Изучить назначение и принципы мониторинга производительности информационных систем.  
2. Рассмотреть функциональные возможности утилит atop и htop.  
3. Изучить архитектуру и принципы работы систем Prometheus и Grafana.  
4. Подготовить реферат в формате Microsoft Word и readme.md.  
5. Разместить работу в репозитории GitHub и принять участие в рецензировании работ других студентов.  

## Содержание

- [Введение](#введение)
- [Утилиты мониторинга atop и htop](#утилиты-мониторинга-atop-и-htop)
  - [Утилита htop](#утилита-htop)
  - [Утилита atop](#утилита-atop)
  - [Сравнение atop и htop](#сравнение-atop-и-htop)
  - [Типовые сценарии использования atop и htop](#типовые-сценарии-использования-atop-и-htop)
    - [Быстрый поиск ресурсоёмкого процесса](#быстрый-поиск-ресурсоёмкого-процесса)
    - [Анализ утечек памяти](#анализ-утечек-памяти)
    - [Расследование инцидентов и сбоев](#расследование-инцидентов-и-сбоев)
    - [Контроль дисковой и сетевой активности](#контроль-дисковой-и-сетевой-активности)
  - [Вывод по использованию atop и htop](#вывод-по-использованию-atop-и-htop)
- [Современные системы мониторинга: Prometheus и Grafana (расширенный разбор)](#современные-системы-мониторинга-prometheus-и-grafana-расширенный-разбор)
  - [Prometheus](#prometheus)
    - [PromQL и анализ метрик](#promql-и-анализ-метрик)
  - [Grafana](#grafana)
    - [Алерты и оповещения](#алерты-и-оповещения)
  - [Архитектура связки Prometheus + Grafana](#архитектура-связки-prometheus--grafana)
  - [Вывод по использованию Prometheus и Grafana](#вывод-по-использованию-prometheus-и-grafana)
- [Заключение](#заключение)
- [Список литературы](#список-литературы)

## Введение  
Мониторинг производительности ИТ-инфраструктуры является важной частью администрирования информационных систем. Современные серверы и сервисы функционируют в условиях высокой нагрузки, поэтому своевременное выявление проблем, перегрузок и узких мест является критически важным для обеспечения стабильной и бесперебойной работы.  

Средства мониторинга позволяют администратору отслеживать использование процессора, оперативной памяти, дисковой подсистемы и сетевых ресурсов. Анализ этих показателей помогает предотвращать аварийные ситуации, оптимизировать использование ресурсов и повышать общую надёжность системы.  

В данной работе рассматриваются как локальные инструменты мониторинга, предназначенные для анализа состояния отдельного сервера, так и распределённые системы мониторинга, применяемые для комплексного контроля ИТ-инфраструктуры.  

## Утилиты мониторинга atop и htop  
Утилиты atop и htop относятся к классу консольных средств мониторинга, широко применяются системными администраторами для анализа производительности Linux-систем. Они позволяют отслеживать состояние ресурсов в режиме реального времени и получать информацию о работе процессов, что делает их важными инструментами оперативного контроля.  

### Утилита htop  
htop — это интерактивная утилита мониторинга процессов, являющаяся усовершенствованной альтернативой стандартной команды top. Основным преимуществом htop является удобный пользовательский интерфейс, который использует цветовую индикацию для отображения нагрузки на процессор, оперативную память и swap.  

В верхней части экрана отображаются графики загрузки каждого ядра процессора, а также информация об использовании памяти. В основной части окна выводится список всех активных процессов, отсортированных по выбранному критерию (по умолчанию — по загрузке CPU). Пользователь может изменять порядок сортировки, завершать процессы, отправлять сигналы и изменять приоритет выполнения.  

**Ключевые возможности htop:**  
- отображение загрузки процессора по каждому ядру;  
- наглядное представление использования оперативной памяти и swap;  
- интерактивное управление процессами;  
- возможность изменения приоритетов (nice) без использования дополнительных команд;  
- удобная навигация с помощью клавиатуры.  

**Пример запуска утилиты:**  
htop

htop особенно удобен для быстрого анализа текущего состояния системы и выявления процессов, потребляющих наибольшее количество ресурсов.  

### Утилита atop  
atop — это более продвинутый инструмент мониторинга, предназначенный для детального анализа производительности системы. В отличие от htop, утилита atop способна не только отображать текущую нагрузку, но и сохранять статистику работы системы в лог-файлы, что позволяет анализировать производительность за прошедшие периоды.  

atop отображает информацию о загрузке процессора, использовании оперативной памяти, дисковой подсистемы и сетевых интерфейсов. Одной из ключевых особенностей является возможность просмотра истории работы системы, что особенно полезно при расследовании инцидентов и анализе причин сбоев.  

**Основные возможности atop:**  
- мониторинг CPU, памяти, дисков и сети;  
- отображение нагрузки по каждому процессу;  
- сбор и хранение статистики производительности;  
- анализ работы системы за прошедшее время;  
- выявление пиковых нагрузок и аномалий.  

**Пример запуска утилиты:**  
atop
**Просмотр сохранённых данных за определённую дату:**  
atop -r /var/log/atop/atop_YYYYMMDD
Использование atop позволяет администратору не только наблюдать текущее состояние системы, но и проводить ретроспективный анализ, что делает утилиту особенно ценной в производственных средах.  

### Сравнение atop и htop  
Несмотря на схожее назначение, atop и htop решают разные задачи. htop ориентирован на удобный и быстрый анализ текущей нагрузки, тогда как atop предназначен для глубокой диагностики и анализа производительности во времени. Совместное использование этих утилит позволяет получить полное представление о состоянии системы и эффективно управлять ресурсами.  

### Типовые сценарии использования atop и htop  
На практике утилиты atop и htop используются для решения различных задач администрирования и диагностики. В зависимости от ситуации администратор выбирает наиболее подходящий инструмент.  

**Быстрый поиск ресурсоёмкого процесса**  
В случае резкого увеличения нагрузки на сервер администратору необходимо оперативно определить процесс, потребляющий наибольшее количество ресурсов. Для этого наиболее удобна утилита htop, так как она позволяет в реальном времени отсортировать процессы по загрузке CPU или памяти и быстро завершить или ограничить проблемный процесс.  

**Пример сценария:**  
- сервер начал отвечать медленно;  
- запускается htop;  
- процессы сортируются по CPU или MEM;  
- выявляется и анализируется проблемный процесс.  

**Анализ утечек памяти**  
Если сервер постепенно начинает потреблять всё больше оперативной памяти, причиной может быть утечка памяти в одном из сервисов. htop позволяет наблюдать рост потребления памяти в реальном времени, однако для подтверждения проблемы за длительный период более эффективен atop, который сохраняет историю нагрузки.  

**Расследование инцидентов и сбоев**  
После аварийного завершения работы сервиса или перегрузки сервера важно понять, что происходило в системе до сбоя. В таких случаях используется atop с возможностью просмотра сохранённых логов производительности. Это позволяет восстановить картину событий и определить причину инцидента.  

**Пример команды:**  
atop -r /var/log/atop/atop_YYYYMMDD

**Контроль дисковой и сетевой активности**  
atop отображает информацию о дисковых операциях ввода-вывода и сетевой активности, что позволяет выявлять перегруженные диски, проблемы с сетью или некорректную работу приложений, активно использующих ввод-вывод.  

**Таблица 1 — Сравнение возможностей atop и htop**  

| Критерий               | htop                        | atop                       |
|------------------------|-----------------------------|----------------------------|
| Тип интерфейса         | Интерактивный, цветной      | Текстовый, аналитический   |
| Работа в реальном времени | Да                          | Да                         |
| Хранение истории       | Нет                         | Да                         |
| Анализ прошлых периодов | Нет                         | Да                         |
| Управление процессами  | Да                          | Ограничено                 |
| Анализ диска и сети    | Ограниченно                 | Полноценно                 |
| Основное назначение    | Быстрый анализ текущей нагрузки | Глубокая диагностика и анализ |

### Вывод по использованию atop и htop  
Утилита htop оптимально подходит для оперативного мониторинга и быстрого реагирования на текущие проблемы производительности. Она удобна для повседневной работы системного администратора и позволяет быстро выявлять процессы, перегружающие систему.  

Утилита atop предназначена для более глубокой диагностики и анализа производительности во времени. Возможность хранения и просмотра истории нагрузки делает её незаменимой при расследовании инцидентов и анализе нестабильной работы серверов.  

Совместное использование atop и htop обеспечивает комплексный подход к мониторингу и позволяет эффективно контролировать состояние ИТ-инфраструктуры.  

## Современные системы мониторинга: Prometheus и Grafana (расширенный разбор)  
Современные ИТ-инфраструктуры характеризуются распределённой архитектурой, большим количеством сервисов и высокой динамикой нагрузки. В таких условиях использование только локальных инструментов мониторинга становится недостаточным, поэтому применяются специализированные системы сбора, хранения и визуализации метрик.  

### Prometheus  
Prometheus — это система мониторинга и хранения временных рядов с открытым исходным кодом, разработанная для сбора количественных метрик производительности. В отличие от классических систем мониторинга, Prometheus использует модель **pull**, при которой центральный сервер периодически опрашивает источники метрик.  

Источниками метрик выступают специальные сервисы — **экспортеры**, которые предоставляют данные в стандартизированном формате. Наиболее распространённым является node_exporter, применяемый для мониторинга серверов и операционных систем.  

**Ключевые особенности Prometheus:**  
- сбор метрик по модели pull;  
- хранение данных во встроенной временной базе;  
- использование языка запросов PromQL для анализа данных;  
- высокая масштабируемость и надёжность;  
- широкая поддержка контейнерных и облачных сред.  

Prometheus собирает такие показатели, как загрузка процессора, использование памяти, сетевой трафик, дисковая активность и метрики работы приложений. Данные сохраняются с временными метками, что позволяет анализировать производительность системы в динамике.  

#### PromQL и анализ метрик  
PromQL — это язык запросов Prometheus, предназначенный для анализа временных рядов. С его помощью можно вычислять средние значения, максимумы, производные и другие показатели.  

**Пример запроса:**  
rate(node_cpu_seconds_total[5m])

Данный запрос позволяет определить среднюю загрузку процессора за последние пять минут, что удобно для анализа кратковременных пиков нагрузки.  

### Grafana  
Grafana — это платформа для визуализации данных мониторинга и аналитики. Она используется совместно с Prometheus и другими источниками данных для отображения метрик в удобном и наглядном виде.  

Основным элементом Grafana являются **дашборды**, которые содержат графики, диаграммы и индикаторы состояния системы. Дашборды позволяют быстро оценить общее состояние инфраструктуры и выявить проблемные зоны.  

**Основные возможности Grafana:**  
- визуализация метрик в виде графиков и диаграмм;  
- создание интерактивных дашбордов;  
- настройка пороговых значений и алертов;  
- поддержка множества источников данных;  
- разграничение прав доступа пользователей.  

#### **Алерты и оповещения**  
Одной из важных функций Grafana является возможность настройки оповещений. Администратор может задать пороговые значения для метрик (например, загрузка CPU выше 90%), при превышении которых система отправит уведомление по электронной почте или в мессенджеры. Это позволяет реагировать на проблемы до того, как они приведут к отказу сервисов.  

**Архитектура связки Prometheus + Grafana**  
Типовая архитектура системы мониторинга выглядит следующим образом:  
1. Экспортеры собирают метрики на серверах и сервисах.  
2. Prometheus периодически опрашивает экспортеры и сохраняет данные.  
3. Grafana подключается к Prometheus и визуализирует собранные метрики.  
4. Администратор анализирует данные и получает оповещения о проблемах.  

Такая архитектура обеспечивает централизованный контроль производительности всей ИТ-инфраструктуры.  

**Практическое применение Prometheus и Grafana**  
Связка Prometheus и Grafana активно используется в корпоративных системах, дата-центрах и облачных платформах. Она позволяет:  
- контролировать состояние серверов и сервисов;  
- анализировать нагрузку во времени;  
- выявлять аномалии и деградацию производительности;  
- повышать отказоустойчивость и надёжность инфраструктуры.  

### **Вывод по использованию Prometheus и Grafana**  
Prometheus обеспечивает надёжный сбор и хранение метрик, а Grafana предоставляет мощные средства их визуализации и анализа. Совместное использование этих систем позволяет создать масштабируемую и эффективную систему мониторинга, соответствующую требованиям современных ИТ-инфраструктур.  

## Заключение  
В ходе выполнения реферата были рассмотрены основные подходы и инструменты мониторинга производительности ИТ-инфраструктуры.  

Были изучены консольные утилиты atop и htop, предназначенные для локального мониторинга Linux-систем. Утилита htop обеспечивает удобный и наглядный контроль текущей нагрузки, позволяя оперативно анализировать состояние процессов и ресурсов системы. Утилита atop предоставляет более глубокие аналитические возможности, включая сбор и хранение истории производительности, что делает её эффективным инструментом для диагностики и расследования инцидентов.  

Также были рассмотрены современные системы мониторинга Prometheus и Grafana, применяемые для централизованного сбора, хранения и визуализации метрик. Prometheus обеспечивает надёжный сбор показателей производительности с использованием модели pull и временных рядов, а Grafana предоставляет средства наглядного отображения данных, анализа и настройки оповещений.  

Таким образом, применение как локальных утилит мониторинга, так и современных распределённых систем обеспечивает комплексный подход к управлению производительностью. Использование atop, htop, Prometheus и Grafana позволяет повысить отказоустойчивость, управляемость и надёжность информационных систем, что делает данные инструменты важной частью современной практики системного администрирования.  

## Список литературы  
1. htop -- интерактивная утилита мониторинга процессов URL: <https://htop.dev/> (дата обращения: 25.12.2025).  
2. atop -- инструмент мониторинга производительности Linux-систем URL: <https://www.atoptool.nl/> (дата обращения: 25.12.2025).  
3. Prometheus -- система мониторинга и хранения метрик URL: <https://prometheus.io/> (дата обращения: 25.12.2025).  
4. Grafana -- платформа визуализации и аналитики URL: <https://grafana.com/> (дата обращения: 25.12.2025).  
5. Мониторинг производительности Linux-серверов: инструменты и методы // Habr URL: <https://habr.com/ru/> (дата обращения: 25.12.2025).  
6. Prometheus и Grafana: организация мониторинга инфраструктуры // Selectel Blog URL: <https://selectel.ru/blog/> (дата обращения: 25.12.2025).  
7. Практика мониторинга и алертинга в современных ИТ-системах // Хекслет URL: <https://ru.hexlet.io/> (дата обращения: 25.12.2025).  
